language: java
before_install:
- wget -O jython.jar http://search.maven.org/remotecontent?filepath=org/python/jython-installer/2.7.1/jython-installer-2.7.1.jar;
      java -jar jython.jar -s -d /tmp/jython;
      export PATH="/tmp/jython/bin:$PATH";
      export INTERPRETER=/tmp/jython/bin/jython;
      jython -h
- mkdir -p ~/.gradle
- echo jythonInterpreter=/tmp/jython/bin/jython >> ~/.gradle/gradle.properties
script: gradle check -PjythonInterpreter=/tmp/jython/bin/jython
deploy:
  provider: releases
  api_key:
    secure: NAKq756CYk1hLJB22264cx7a8R7xk9PL6pwpUOVQkPXLe1YvZ+Nd9/nYhY9N4axNEgvJJppxOwhvQ6D47o3M3uAzbdElPg2fa08TiCtmnPAWOJdOBIqiyM3Z8dkIBubkMJ2qbdwlu3OUz/R01ZTGtD35uQ05SAPipI+6zzlv/IY=
  file_glob: true
  file: build/libs/*
  skip_cleanup: true
  on:
    all_branches: true
    tags: true
    repo: xebialabs-community/overthere-pylib
